name:                http3
version:             0.0.0
author:              Kazu Yamamoto <kazu@iij.ad.jp>
maintainer:          Kazu Yamamoto <kazu@iij.ad.jp>
license:             BSD3
license-file:        LICENSE
synopsis:            HTTP/3 library
description:         HTTP/3 library including frames, QPACK, client and server.
homepage:            https://github.com/kazu-yamamoto/http3
category:            Network
cabal-version:       >=1.10
build-type:          Simple
extra-source-files:  CHANGELOG.md

library
  default-language:    Haskell2010
  ghc-options:         -Wall
  exposed-modules:     Network.HTTP3.Client
                       Network.HTTP3.Server
                       Network.QPACK
                       Network.QPACK.Internal
  other-modules:       Imports
                       Network.HTTP3.Context
                       Network.HTTP3.Control
                       Network.HTTP3.Error
                       Network.HTTP3.Frame
                       Network.HTTP3.Recv
                       Network.HTTP3.Send
                       Network.HTTP3.Settings
                       Network.HTTP3.Stream
                       Network.QPACK.HeaderBlock
                       Network.QPACK.HeaderBlock.Decode
                       Network.QPACK.HeaderBlock.Encode
                       Network.QPACK.HeaderBlock.Prefix
                       Network.QPACK.Instruction
                       Network.QPACK.Table
                       Network.QPACK.Table.Dynamic
                       Network.QPACK.Table.RevIndex
                       Network.QPACK.Table.Static
                       Network.QPACK.Token
                       Network.QPACK.Types
  build-depends:       base >= 4.13 && < 5
                     , array
                     , bytestring
                     , case-insensitive
                     , containers
                     , http2
                     , http-types
                     , network-byte-order
                     , quic
                     , stm
                     , time-manager
  if impl(ghc >= 8)
      default-extensions:  Strict StrictData

Test-suite spec
  type:                exitcode-stdio-1.0
  default-language:    Haskell2010
  hs-source-dirs:      test
  ghc-options:         -Wall -threaded
  main-is:             Spec.hs
  other-modules:       HTTP3.ServerSpec
                       QPACK.InstructionSpec
                       QPACK.TableSpec
  Build-Depends:       base >= 4 && < 5
                     , QuickCheck
                     , async
                     , base16-bytestring
                     , bytestring
                     , cryptonite
                     , hspec >= 1.3
                     , http-types
                     , http2
                     , http3
                     , iproute
                     , network
                     , quic
                     , tls
  if impl(ghc >= 8)
      default-extensions:  Strict StrictData

Test-Suite doctest
  Type:                 exitcode-stdio-1.0
  Default-Language:     Haskell2010
  HS-Source-Dirs:       test
  Ghc-Options:          -Wall -threaded
  Main-Is:              doctests.hs
  Build-Depends:        base >= 4 && < 5
                      , doctest >= 0.9.3
  if impl(ghc >= 8)
      Default-Extensions:  Strict StrictData
